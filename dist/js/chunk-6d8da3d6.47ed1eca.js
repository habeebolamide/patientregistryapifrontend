(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d8da3d6"],{d81d:function(t,e,a){"use strict";var n=a("23e7"),o=a("b727").map,s=a("1dde"),r=s("map");n({target:"Array",proto:!0,forced:!r},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},e35a:function(t,e,a){"use strict";a.r(e);a("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("VueElementLoading",{attrs:{active:t.loading,text:t.loading_text,spinner:"line-scale",color:"var(--primary)"}}),e("b-row",[e("b-col",{attrs:{md:"12",xl:"12",lg:"12"}},[e("b-card",{staticClass:"mb-30",attrs:{"header-bg-variant":"transparent"},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("span",[t._v("Groups")]),e("b-button",{staticClass:"outline-primary",on:{click:function(e){return t.$bvModal.show("create-group")}}},[t._v("Create Group")])],1),e("b-modal",{attrs:{id:"create-group","hide-footer":"",title:"Create Group"}},[e("Create",{attrs:{my_modal:t.$bvModal},on:{"get-group":function(e){return t.getGroups()}}})],1)]},proxy:!0}])},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover table-sm"},[e("thead",[e("tr",[e("th",[t._v("S/N")]),e("th",[t._v("Name")]),e("th",[t._v("Disease")]),e("th",[t._v("Join Group")])])]),e("tbody",t._l(t.groups,(function(a,n){return e("tr",{key:n},[e("th",[t._v(t._s(n+1))]),e("th",[t._v(t._s(a.name))]),e("th",[t._v(t._s(a.disease.name))]),e("th",[e("button",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.joinGroup(a._id)}}},[t._v("Join group")])])])})),0)])])]),e("b-pagination",{attrs:{"total-rows":t.groupCount,"per-page":t.perPage},on:{change:t.getGroups},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)},o=[],s=(a("ac1f"),a("5319"),a("d81d"),a("4de4"),a("d3b7"),function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"main-card card"},[e("VueElementLoading",{attrs:{active:t.loading,text:t.loading_text,spinner:"line-scale",color:"var(--primary)"}}),e("form",{on:{submit:function(e){return e.preventDefault(),t.createGroup.apply(null,arguments)}}},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 mb-3"},[e("div",{staticClass:"input-group"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})])]),e("div",{staticClass:"col-md-12 mb-3"},[e("div",{staticClass:"input-group mb-3"},[t._m(1),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.diseaseId,expression:"form.diseaseId"}],staticClass:"custom-select",attrs:{id:"inputGroupSelect01"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"diseaseId",e.target.multiple?a:a[0])}}},[e("option",{attrs:{selected:""}},[t._v("Choose...")]),t._l(t.disease,(function(a){return e("option",{domProps:{value:a._id}},[t._v(t._s(a.name))])}))],2)])])])]),e("div",{staticClass:"d-block text-right card-footer"},[e("button",{staticClass:"mr-2 btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.closeMe()}}},[t._v(" Cancel ")]),e("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[t._v(" Create Group ")])])])],1)])}),r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[t._v("Group Name:")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"input-group-prepend"},[e("label",{staticClass:"input-group-text",attrs:{for:"inputGroupSelect01"}},[t._v("Group Disease")])])}],i=a("6ad0"),u=a.n(i),c={props:{my_modal:Object},components:{VueElementLoading:u.a},data:function(){return{form:{},errors:{},disease:{},loading:!1,loading_text:"",auth_token:{}}},methods:{getDisease:function(){var t=this,e={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.auth_token.replace(/"/g,""))}};this.$http.get(this.dynamic_route("/disease/all"),e).then((function(e){t.disease=e.data.diseases}))},closeMe:function(){this.my_modal.hide("create-group")},createGroup:function(){var t=this;this.loading=!0,this.loading_text="Creating Group";var e={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.auth_token.replace(/"/g,""))}};this.$http.post(this.dynamic_route("/group/createGroup"),this.form,e).then((function(e){t.$toast.success(e.data.message,{timeout:3e3}),t.loading=!1,t.loading_text="",t.closeMe(),t.$emit("get-group")})).catch((function(t){console.log(t.response.data)}))}},mounted:function(){this.auth_token=localStorage.getItem("auth_token"),this.getDisease()}},l=c,p=a("2877"),d=Object(p["a"])(l,s,r,!1,null,null,null),g=d.exports,m={metaInfo:{title:"SignIn"},components:{Create:g,VueElementLoading:u.a},data:function(){return{groups:{},loading:!1,loading_text:"",auth_token:{},currentPage:1,perPage:10,groupCount:""}},methods:{getGroups:function(){var t=this;this.loading=!0,this.loading_text="Fetching Group";var e={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.auth_token.replace(/"/g,""))},params:{page:this.currentPage,perPage:this.perPage}};this.$http.get(this.dynamic_route("/group/all"),e).then((function(e){t.loading=!1,t.loading_text="",t.groups=e.data.data.groups,t.perPage=e.data.data.perPage,t.groupCount=e.data.data.groupCount}))},joinGroup:function(t){var e=this,a={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.auth_token.replace(/"/g,""))}};this.$http.post(this.dynamic_route("/group/".concat(t,"/joingroup")),{},a).then((function(t){e.$toast.success(t.data.message,{timeout:3e3})})).catch((function(t){console.log(t),e.$toast.error(t.response.data.message,{timeout:3e3})}))}},mounted:function(){this.auth_token=localStorage.getItem("auth_token"),this.getGroups()}},h=m,v=Object(p["a"])(h,n,o,!1,null,null,null);e["default"]=v.exports}}]);